import { includeIgnoreFile } from "@eslint/compat";
import javascript from "@eslint/js";
import prettier from "eslint-config-prettier";
{{#if jest}}
import jest from "eslint-plugin-jest";
{{/if}}
{{#if react}}
import react from "eslint-plugin-react";
import reactHooks from 'eslint-plugin-react-hooks';
{{/if}}
import { defineConfig } from "eslint/config";
import globals from "globals";
import { fileURLToPath } from "node:url";
{{#if typescript}}
import typescript from "typescript-eslint";
{{/if}}

const GITIGNORE_PATH = fileURLToPath(new URL(".gitignore", import.meta.url));

export default defineConfig([
  includeIgnoreFile(GITIGNORE_PATH),
  {
    ignores: ["**/*.d.ts"],
  },
  javascript.configs.recommended,
  {{#if jest}}
  {
    files: ["**/*.test.{{extensions}}"],
    ...jest.configs['flat/recommended'],
  },
  {{/if}}
  {{#if react}}
  react.configs.flat.recommended,
  reactHooks.configs['recommended-latest'],
  {{/if}}
  {{#if typescript}}
  ...typescript.configs.recommendedTypeChecked,
  {
    languageOptions: {
      parserOptions: {
        projectService: true,
        tsconfigRootDir: import.meta.dirname,
      },
    },
  },
  {{/if}}
  prettier,
  {
    files: ["**/*.{{extensions}}"],
    languageOptions: {
      globals: {
        {{#if browser}}
        ...globals.browser,
        {{/if}}
        {{#if node}}
        ...globals.node,
        {{/if}}
      },
    },
  },
]);
